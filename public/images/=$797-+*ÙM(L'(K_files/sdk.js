/*****************************/
/* Copyright Pepsia.com 2018 */
/*****************************/
!function(){if("object"!=typeof window.Pepsia&&(window.Pepsia={}),void 0===window.Pepsia.Helpers){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Object.defineProperty(window.Pepsia,"Helpers",{value:new function(){this.getPepsiaParam=function(e,t,o){var i=o=void 0!==o&&o,a=e.getAttribute("data-"+t);return a&&a.toString().match(new RegExp("^[A-Z0-9]{4}$","i"))&&(i=a),i},this.getPosParam=function(e,t,o){var i=o=void 0!==o&&o,a=!!e.getAttribute("data-"+t)&&e.getAttribute("data-"+t).toLowerCase();return a&&(a.match(/^((top|middle|bottom)\-(left|center|right)|false|0)$/)?("false"!=a&&"0"!=a||(a=!1),i=a):this.log("Helpers","data-"+t+" not valid : "+a+", overrided with "+o,"info")),i},this.getIntParam=function(e,t,o,i,a){o=void 0!==o?o:0,i=void 0!==i&&i,a=void 0!==a&&a;var r=isNaN(parseInt(e.getAttribute("data-"+t)))?o:parseInt(e.getAttribute("data-"+t));return r&&i&&r<i&&(this.log("Helpers","data-"+t+" not valid : "+r+", overrided with "+i,"info"),r=i),r&&a&&a<r&&(this.log("Helpers","data-"+t+" not valid : "+r+", overrided with "+a,"info"),r=a),r},this.getFloatParam=function(e,t,o,i,a){o=void 0!==o?o:0,i=void 0!==i&&i,a=void 0!==a&&a;var r=isNaN(parseFloat(e.getAttribute("data-"+t)))?o:parseFloat(e.getAttribute("data-"+t));return r&&i&&r<i&&(this.log("Helpers","data-"+t+" not valid : "+r+", overrided with "+i,"info"),r=i),r&&a&&a<r&&(this.log("Helpers","data-"+t+" not valid : "+r+", overrided with "+a,"info"),r=a),r},this.getBoolParam=function(e,t,o){return o=void 0!==o&&o,e.getAttribute("data-"+t)?!!+e.getAttribute("data-"+t):o},this.dispatchEvent=function(e,t,o){if(o={bubbles:!!(o=o||{bubbles:!1,cancelable:!1,detail:void 0}).bubbles,cancelable:!!o.cancelable,detail:o.detail?o.detail:null},"function"==typeof CustomEvent)var i=new CustomEvent(t,o);else(i=document.createEvent("CustomEvent")).initCustomEvent(t,o.bubbles,o.cancelable,o.detail);e.dispatchEvent(i)},this.addEventListener=function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},this.removeEventListener=function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent&&e.detachEvent("on"+t,o)},this.setCookie=function(e,t,o){var i="";if(o){var a=new Date;a.setTime(a.getTime()+60*o*1e3),i="; expires="+a.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},this.getCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var a=o[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},this.getScreenPosition=function(){var e=void 0!==window.top.pageYOffset?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop,t=void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft;return{width:window.top.innerWidth,height:window.top.innerHeight,top:e,left:t,bottom:e+window.top.innerHeight,right:t+window.top.innerWidth}},this.getPosition=function(e){var t=0,o=0,i=0,a=0;if(e.offsetParent)for(t=e.offsetTop,o=e.offsetLeft,i=e.offsetWidth,a=e.offsetHeight;e=e.offsetParent;)if(t+=e.offsetTop,o+=e.offsetLeft,"fixed"==e.style.position){t+=void 0!==window.top.pageYOffset?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop,o+=void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft;break}return{width:i,height:a,top:t,left:o,right:o+i,bottom:t+a}},this.screenVisibilityFromPos=function(e){var t=this.getScreenPosition(),o=e.height,i=e.width;if(e.top>t.bottom||e.bottom<t.top||e.left>t.right||e.right<t.left)return 0;e.top<t.top&&(o-=t.top-e.top),e.bottom>t.bottom&&(o-=e.bottom-t.bottom),e.left<t.left&&(i-=t.left-e.left),e.right>t.right&&(i-=e.right-t.right);var a=e.height*e.width,r=o*i;return 0<r?r/a:0},this.screenVisibilityMatrix=function(e,t,o,i,a,r,n){i=void 0!==i?i:0,a=void 0!==a?a:0,r=void 0!==r?r:0,n=void 0!==n?n:0;var p=[];function l(e,t,o){for(var i=[],a=0;a<t;a++){i[a]=[];for(var r=0;r<e;r++)i[a][r]=o}return i}document.hidden&&(p=l(t,o,0));var s=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(s&&(s===e||s.contains(e)))return{percent:1,matrix:p=l(t,o,1),pepsia_covered:!1};for(var d=e;d;){var c=window.getComputedStyle(d,null);if("hidden"===c.getPropertyValue("visibility"))return this.log("Helpers","Visibility Hidden !","error"),{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};if("none"===c.getPropertyValue("display"))return this.log("Helpers","Visibility Not Displayed !","error"),{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};if("1"!==c.getPropertyValue("opacity"))return this.log("Helpers","Visibility Opacified !","error"),{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};if(c.getPropertyValue(!0))return this.log("Helpers","Visibility Transformed !","error"),{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};(d=d.parentNode)===document&&(d=null)}var m=Pepsia.Helpers.getPosition(e);if(m.width-=n+a,m.height-=i+r,m.top+=i,m.left+=n,m.right+=a,m.bottom+=r,0==this.screenVisibilityFromPos(m))return{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};var u=m.width/t,g=m.height/o;m.left+=u/2,m.top+=g/2;for(var f=null,b=0,y=!1,h=m.left-(void 0!==window.top.pageXOffset)?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft,P=m.top-(void 0!==window.top.pageYOffset)?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop,v=0;v<o;v++){p[v]=[],h=m.left-(void 0!==window.top.pageXOffset)?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft;for(var x=0;x<t;x++)(f=document.elementFromPoint(h,P))===e||e.contains(f)?(b++,p[v][x]=1):f&&!y&&this.getParentWithClass(f,"pepsia_player")?(p[v][x]=2,y||(y=!0)):p[v][x]=0,h+=u;P+=g}return percent=b/(t*o),{percent:percent,matrix:p,pepsia_covered:y}},this.getParentWithClass=function(e,t){return e?e.className&&0<=e.className.split(" ").indexOf(t)?e:e.parentNode&&this.getParentWithClass(e.parentNode,t):null},this.log=function(e,t,o,i){o=void 0!==o?o:"log",((i=void 0!==i&&i)||"error"==o)&&console[o]("%c Pepsia.com "+e,"background: #ccc; color: #2176ff",t)}},enumerable:!0,writable:!1})}if("function"!=typeof window.Pepsia.Player){!function(){var p=!1,b={},y=!1,h=!1,c={},r={},P={},v={},x={},w=!1,m=!1,H=!1,n={token:!1,vid:!1,cid:!1,autoplay:!0,automute:!1,controls:!1,mute:!0,volume:1,logo:!0,corner:"bottom-left",interstitial:0,popup:!1,inscreen:!1,skip:!1,maxplay:15,clicsaver:!1,debug:!1},E={},l=!1,O=!1,u=!!Pepsia.Helpers.getCookie("PepsiaClose"),g=window.top.scrollX,f=window.top.scrollY;function a(e,t){var i={};return i.element=e,i.api=!1,i.started=!1,i.canpause=!1,i.forced=!1,i.fullscreen=!1,i.closed=!!Pepsia.Helpers.getCookie("PepsiaClose"),i.id=t.id,i.token=t.token,i.vid=t.vid,i.cid=t.cid,i.autoplay=t.autoplay,i.automute=t.automute,i.controls=t.controls,i.mute=t.mute,i.volume=t.volume,i.logo=t.logo,i.corner=t.corner,i.interstitial=t.interstitial,i.popup=t.popup,i.inscreen=t.inscreen,i.maxplay=t.maxplay,i.skip=t.skip,i.clicsaver=t.clicsaver,i.debug=t.debug,i.state="",i.duration=0,i.time=0,i.mode="normal",i.cpt=0,i.isview=!1,i.inplay=!1,i.container=document.createElement("div"),i.container.id="pepsia_player_container_"+i.id,500<=e.offsetWidth?i.container.style.cssText="position:relative !important;padding:calc(56.25% + 60px) 0 0 0 !important;":i.container.style.cssText="position:relative !important;padding:calc(56.25% + 40px) 0 0 0 !important;",i.box=document.createElement("div"),i.box.id="pepsia_player_box_"+i.id,i.box.style.background="#fff",i.box.style.boxShadow="0 0 10px #ccc",i.box.style.margin="0 !important",i.box.style.padding="0 !important",i.box.style.position="absolute",i.box.style.zIndex="auto",i.box.style.width="100%",i.box.style.height="100%",i.box.style.bottom=0,i.box.style.left=0,i.box.style.top=0,i.box.style.right=0,i.close=document.createElement("a"),i.close.id="pepsia_player_close_"+i.id,i.close.title="Close",i.close.href="#",i.close.innerHTML="x",i.close.dataset.role="none",i.close.onclick=function(e){e.preventDefault(),Pepsia.Helpers.setCookie("PepsiaClose",1,30),V(i,"close"),U(u=!0)},i.close.style.display="none",i.player=document.createElement("iframe"),i.player.id="pepsia_player_screen_"+i.id,i.player.src="about:blank",i.player.setAttribute("allowfullscreen",""),i.player.setAttribute("mozallowfullscreen",""),i.player.setAttribute("webkitallowfullscreen",""),i.player.setAttribute("frameborder","0"),i.player.setAttribute("allow","autoplay"),i.player.style.cssText="width:100% !important;height:100% !important;overflow:hidden !important;position: absolute;top: 0;left: 0;bottom: 0;right: 0;",i.player.onload=function(){var t=location.protocol+"//player.pepsia.com/V2/";t+="?token="+i.token,i.vid&&(t+="&vid="+i.vid),i.cid&&(t+="&cid="+i.cid),i.mute||(t+="&mute=0"),i.controls&&(t+="&controls=1"),i.autoplay&&(t+="&autoplay=1"),t+="&logo="+i.logo,t+="&volume="+i.volume,t+="&api=1",t+="&id="+i.id,i.debug&&(t+="&debug=1"),t+="&origin="+window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),t+="&d="+(new Date).getTime().toString(16);var o=new XMLHttpRequest;o.open("GET",t),o.withCredentials=!0,o.onload=function(){if(200===o.status){var e=this.contentWindow?this.contentWindow:this.contentDocument.document?this.contentDocument.document:this.contentDocument;e.document.open(),e.document.write(o.response),e.document.close()}else this.src=t}.bind(i.player),o.onerror=function(){this.src=t}.bind(i.player),o.send(),i.player.onload=null}.bind(i),i.box.appendChild(i.close),i.box.appendChild(i.player),i.container.appendChild(i.box),i.inscreen&&function(e){Pepsia.Helpers.log("Player #"+e.id,"Looking for best inscreen position","info",e.debug);var t,o=Pepsia.Helpers.getScreenPosition(),i=Pepsia.Helpers.getPosition(e.element);if(i.height=9*i.width/16+(480<i.width?60:40),i.bottom=i.top+i.height,.5<=Pepsia.Helpers.screenVisibilityFromPos(i))return Pepsia.Helpers.log("Player #"+e.id,"Player is already inscreen !","info",e.debug);for(var a=e.element,r=0;r<e.inscreen;r++)a.parentNode&&(a=a.parentNode,t=a);var n=Pepsia.Helpers.getPosition(t);if(n.height+=i.height,n.bottom+=i.height,1<e.inscreen){a=e.element.parentNode;var p=Pepsia.Helpers.getPosition(a);p.height+=i.height,p.bottom+=i.height}else{a=e.element;var p=i}var l=i.top-p.top,s=i.left-p.left;if(n.top<o.bottom&&n.bottom>o.top&&n.left<o.right&&n.right>o.left){for(var d=t.childElementCount-1;0<d;d--){var c=window.getComputedStyle(t.children[d],null);if("fixed"!==c.getPropertyValue("position")&&"absolute"!==c.getPropertyValue("position")&&"left"===c.getPropertyValue("float")&&"right"===c.getPropertyValue("float")){var m=Pepsia.Helpers.getPosition(t.children[d]);if(m.top+=l,m.left+=s,m.height=i.height,m.width=i.width,m.bottom=m.top+i.height,m.right=m.left+i.width,.5<=Pepsia.Helpers.screenVisibilityFromPos(m)&&m.top<i.top)return Pepsia.Helpers.log("Player #"+e.id,"Move Player on "+d+" child position !","info",e.debug),t.insertBefore(a,t.children[d])}}Pepsia.Helpers.log("Player #"+e.id,"No Best position found !","info",e.debug)}else Pepsia.Helpers.log("Player #"+e.id,"TopParentPlayer is NOT inscreen !","info",e.debug);Pepsia.Helpers.log("Player #"+e.id,"Set Player on 1 child position !","info",e.debug),t.insertBefore(a,t.firstChild)}(i),i.element.appendChild(i.container),i}function C(e){if(delete b[e.id],Pepsia.Helpers.log("Player #"+e.id,"Killed !","info",e.debug),H==e)for(var t in H=!1,b){var o=Pepsia.Helpers.getIntParam(b[t].element,"interstitial",n.interstitial,15,60);if(o){b[t].interstitial=o,H=b[t],Pepsia.Helpers.log("Player #"+b[t].id,"Activation de l'interstitial "+o+"s (Kill player #"+e.id+" avec interstitial encore actif)","info",b[t].debug);break}}if(m==e)for(var t in m=!1,b){var i=Pepsia.Helpers.getPosParam(b[t].element,"popup",n.popup);if(i){b[t].popup=i,m=b[t],Pepsia.Helpers.log("Player #"+b[t].id,"Activation du popup "+i+" (Kill player #"+e.id+" avec popup encore actif)","info",b[t].debug);break}}if(w==e)for(var t in w=!1,b){var a=Pepsia.Helpers.getPosParam(b[t].element,"corner",n.corner);if(a){b[t].corner=a,w=b[t],Pepsia.Helpers.log("Player #"+b[t].id,"Activation du corner "+a+" (Kill player #"+e.id+" avec corner encore actif)","info",b[t].debug);break}}y==e&&(y=!1),h==e&&(h=!1),delete r[e.id],delete P[e.id],delete v[e.id],delete x[e.id],e.element.remove(),U(!0)}function t(o){Object.defineProperty(o.element,"api",{get:function(){return o.api},enumerable:!0}),Object.defineProperty(o.element,"token",{get:function(){return o.token},enumerable:!0}),Object.defineProperty(o.element,"fullscreen",{get:function(){return o.fullscreen},set:function(e){L(o,{action:"setFullscreen",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"autoplay",{get:function(){return o.autoplay},set:function(e){L(o,{action:"setAutoplay",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"mute",{get:function(){return o.mute},set:function(e){S(o,e)},enumerable:!0}),Object.defineProperty(o.element,"controls",{get:function(){return o.controls},set:function(e){d(o,e)},enumerable:!0}),Object.defineProperty(o.element,"volume",{get:function(){return o.volume},set:function(e){L(o,{action:"setVolume",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"play",{value:function(){s(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"pause",{value:function(){j(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"next",{value:function(){W(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"time",{get:function(){return o.time},set:function(){_(o,time)},enumerable:!0}),Object.defineProperty(o.element,"load",{value:function(e){_load(o,e)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"screenVisibility",{get:function(){return o.screenVisibility},enumerable:!0}),Object.defineProperty(o.element,"logo",{get:function(){return o.logo},set:function(e){L(o,{action:"setLogo",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"popup",{get:function(){return o.popup},enumerable:!0}),Object.defineProperty(o.element,"corner",{get:function(){return o.corner},enumerable:!0}),Object.defineProperty(o.element,"interstitial",{get:function(){return o.interstitial},enumerable:!0}),Object.defineProperty(o.element,"mode",{get:function(){return o.mode},enumerable:!0}),Object.defineProperty(o.element,"addEventListener",{value:function(e,t){Pepsia.Helpers.addEventListener(o.player,e,t)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"removeEventListener",{value:function(e,t){Pepsia.Helpers.removeEventListener(o.player,e,t)},enumerable:!0,writable:!1})}function T(){if(!l){l=!0;var e,t={all:0};for(var o in b){var i=b[o];i.cid?(void 0===t[i.cid]&&(t[i.cid]=0),t[i.cid]++):t.all++,e=i.token}for(k in t){E[k],E[k]={};var a=6*parseInt(t[k])-Object.keys(E[k]).length+3;Pepsia.Helpers.log("Controler","Looking for "+a+" videos","info",p);var r=new XMLHttpRequest,n=location.protocol+"//player.pepsia.com/algo.php";n+="?token="+e,n+="&num="+a,"all"!=k&&(n+="&cid="+k),n+="&origin="+window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n+="&d="+(new Date).getTime().toString(16),r.open("GET",n),r.withCredentials=!0,r.onload=function(){if(l=!1,200===r.status)if(data=JSON.parse(r.responseText),"ok"==data.status){for(var e in Pepsia.Helpers.log("Controler",data.data.length+(1<data.data.length?" videos found !":" video found !"),"info",p),data.data)E[k][data.data[e].id]=data.data[e];Pepsia.Helpers.log("Controler",E,"info",p)}else Pepsia.Helpers.log("Controler",data.message,"error",p)},r.send()}}}function o(e){if(!e)return!1;var t={};if(t.id=Object.keys(b).length,t.token=Pepsia.Helpers.getPepsiaParam(e,"token",n.token),!t.token)return Pepsia.Helpers.log("Player #"+t.id,"No Token Provided !","error"),!1;t.vid=Pepsia.Helpers.getPepsiaParam(e,"vid",n.vid),t.cid=Pepsia.Helpers.getPepsiaParam(e,"cid",n.cid),t.autoplay=Pepsia.Helpers.getBoolParam(e,"autoplay",n.autoplay),t.automute=Pepsia.Helpers.getBoolParam(e,"automute",n.automute),t.controls=Pepsia.Helpers.getBoolParam(e,"controls",n.controls),t.mute=Pepsia.Helpers.getBoolParam(e,"mute",n.mute),t.volume=Pepsia.Helpers.getFloatParam(e,"logo",n.volume,0,1),t.logo=Pepsia.Helpers.getBoolParam(e,"logo",n.logo),t.corner=Pepsia.Helpers.getPosParam(e,"corner",n.corner),t.popup=Pepsia.Helpers.getPosParam(e,"popup",n.popup),t.interstitial=Pepsia.Helpers.getIntParam(e,"interstitial",n.interstitial,15,60),t.inscreen=Pepsia.Helpers.getIntParam(e,"inscreen",n.inscreen,1,2),t.maxplay=Pepsia.Helpers.getIntParam(e,"maxplay",n.maxplay,1,15),t.skip=Pepsia.Helpers.getBoolParam(e,"skip",n.skip),t.clicsaver=Pepsia.Helpers.getBoolParam(e,"clicsaver",n.clicsaver),t.debug=Pepsia.Helpers.getBoolParam(e,"debug",n.debug),t.corner&&(w?(Pepsia.Helpers.log("Player #"+t.id,"1 seul corner autorisé ! Désactivation du corner !","warn",!0),t.corner=!1):u?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a fermé 1 player Pepsia lors des 30 dernières minutes ! Désactivation du corner !","info",!0),t.corner=!1):w=!0),t.popup&&(m?(Pepsia.Helpers.log("Player #"+t.id,"1 seul popup autorisé ! Désactivation du popup !","warn",!0),t.popup=!1):u?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a fermé 1 player Pepsia lors des 30 dernières minutes ! Désactivation du popup !","info",!0),t.popup=!1):m=!0),t.interstitial&&(H?(Pepsia.Helpers.log("Player #"+t.id,"1 seul interstitial autorisé ! Désactivation de l'interstitial !","warn",!0),t.interstitial=!1):Pepsia.Helpers.getCookie("PepsiaInterstitial")?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a vu 1 interstitial lors des 30 dernières minutes ! Désactivation de l'interstitial !","info",!0),t.interstitial=!1):H=!0),t.autoplay||(t.vid||(Pepsia.Helpers.log("Player #"+t.id,"Pas de vidéo activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.interstitial&&(Pepsia.Helpers.log("Player #"+t.id,"Interstitial activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.popup&&(Pepsia.Helpers.log("Player #"+t.id,"Popup activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.corner&&(Pepsia.Helpers.log("Player #"+t.id,"Corner activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0));var o=a(e,t);return o&&(b[o.id]=o,!0===H&&(H=o),!0===w&&(w=o),!0===m&&(m=o)),o}function A(e){e.mode="interstitial",e.box.style.position="fixed",e.box.style.zIndex=2147483647,e.box.style.width="100%",e.box.style.height="100%",e.box.style.bottom=0,e.box.style.left=0,e.box.style.top=0,e.box.style.right=0,e.close.style.display="none",e.box.style.transform="",L(e,{action:"mode",value:"interstitial"}),B(e)}function D(e){var t;e.mode="normal",e.box.style.position="absolute",e.box.style.zIndex="auto",e.box.style.width="100%",e.box.style.height="100%",e.box.style.bottom=0,e.box.style.left=0,e.box.style.top=0,e.box.style.right=0,e.close.style.display="none",e.box.style.transform="",L(e,{action:"mode",value:"normal"}),(t=e)&&v[t.id]&&(delete v[t.id],d(t,!0),Pepsia.Helpers.log("Player #"+t.id,"unControled","info",t.debug))}function N(){return"connection"in navigator&&!!navigator.connection.saveData&&navigator.connection.saveData}function L(e,t){if(e.api||"setVideos"==t.action){var o=e.player.contentWindow?e.player.contentWindow:e.player.contentDocument.document?e.player.contentDocument.document:e.player.contentDocument;t.id=e.id,t.provider="Pepsia",o.postMessage(t,"*")}else Pepsia.Helpers.log("Player #"+e.id,"ERROR "+t.action+" : API not ready yet !","error",e.debug)}function s(e){e.inplay=!0,L(e,{action:"play"})}function j(e){L(e,{action:"pause"})}function _(e,t){L(e,{action:"seek",time:t})}function V(e,t){L(e,{action:"track",value:t})}function W(e){e.inplay=!0,L(e,{action:"next"})}function d(e,t){L(e,{action:"setControls",bool:t})}function S(e,t){L(e,{action:"setMute",bool:t})}function z(e){!e||P[e.id]||e.mute||(S(e,!0),P[e.id]=e,Pepsia.Helpers.log("Player #"+e.id,"Muted","info",e.debug))}function F(e){e&&P[e.id]&&(delete P[e.id],S(e,!1),Pepsia.Helpers.log("Player #"+e.id,"unMuted","info",e.debug))}function I(e){return!(!e||!P[e.id])}function X(e){e&&!r[e.id]&&e.started&&e.canpause?(j(r[e.id]=e),Pepsia.Helpers.log("Player #"+e.id,"Paused","info",e.debug)):(Pepsia.Helpers.log("Player #"+e.id,"Paused Failed","info",e.debug),Pepsia.Helpers.log("Player #"+e.id,r,"info",e.debug))}function M(e){e&&r[e.id]&&(delete r[e.id],s(e),Pepsia.Helpers.log("Player #"+e.id,"unPaused","info",e.debug))}function B(e){e&&e.controls&&!v[e.id]&&(d(v[e.id]=e,!1),Pepsia.Helpers.log("Player #"+e.id,"Controled","info",e.debug))}function Y(e){e&&x[e.id]&&(delete x[e.id],s(e),Pepsia.Helpers.log("Player #"+e.id,"unWaited","info",e.debug))}function R(e){return!(!e||!x[e.id])}function U(e){if(!("object"==typeof(e=void 0!==e&&e)&&Math.abs(window.top.scrollX-g)<20&&Math.abs(window.top.scrollY-f)<20)&&(g=window.top.scrollX,f=window.top.scrollY,0!=Object.keys(b).length)){if(u&&(m&&(Pepsia.Helpers.log("Player #"+m.id,"Désactivation mode Popup ! (closed)","info",m.debug),D(m),z(m),m=!1),w&&(Pepsia.Helpers.log("Player #"+w.id,"Désactivation mode Corner ! (closed)","info",w.debug),D(w),z(w),w=!1)),H&&H.api&&"interstitial"==H.mode)return Pepsia.Helpers.log("Player #"+H.id,"Activation mode Interstitial !","info",H.debug),y||(y=H),y!=H&&(X(y),z(y),y=H),void(!y.started&&y.autoplay&&W(y));if(!(y&&y.started&&N()&&y.clicsaver&&"interstitial"==y.mode)){for(var t in c={},b){var o=b[t],i=(a=o.container,n=void 0,r=480<a.offsetWidth?40:20,(n=Pepsia.Helpers.getPosition(a)).width-=0,n.height-=r+20,n.top+=r,n.left+=0,n.right+=0,n.bottom+=20,Pepsia.Helpers.screenVisibilityFromPos(n));.2<i&&(o.isview=!0,m&&o==m&&("popup"==m.mode&&(Pepsia.Helpers.log("Player #"+m.id,"Désactivation mode Popup ! (position ok)","info",m.debug),D(m)),m=!1),w&&o==w&&"corner"==w.mode&&(Pepsia.Helpers.log("Player #"+w.id,"Désactivation mode Corner ! (position ok)","info",w.debug),D(w)),o.api&&(c[o.id]=o)),o.screenVisibility=i,o.started&&"normal"==o.mode&&(0==i?(z(o),M(o)):I(o)&&(X(o),F(o))),o.screenVisibility=i}var a,r,n;if(!y||y.canpause||!c[y.id]){if(y&&h&&y==h){if(c[y.id])return;h=!1,Pepsia.Helpers.log("Player #"+y.id,"Désactivation forcage User !","info",y.debug)}if(0<Object.keys(c).length){var p=0,l=null;for(var t in c){var s=c[t],d=s.screenVisibility;p<=d&&(s.started||(d+=1),R(s)&&(d+=1),p=d,l=s)}return m&&"popup"==m.mode&&m==y&&m!=l&&(D(m),Pepsia.Helpers.log("Player #"+m.id,"Désactivation mode Popup !","info",m.debug),z(y),y=!1),w&&"corner"==w.mode&&w==y&&w!=l&&(D(w),Pepsia.Helpers.log("Player #"+w.id,"Désactivation mode Corner !","info",w.debug),z(y),y=!1),l!=y&&(X(y),y=l,Pepsia.Helpers.log("Player #"+y.id,"Activation en Classic Mode !","info",y.debug)),!y.started&&N()&&y.clicsaver&&(A(y),V(o,"Saver !"),L(y,{action:"interstitial_start",value:!0}),Pepsia.Helpers.log("Player #"+y.id,"Data-Saver actif Play2see activé !","info",y.debug)),y.started||!y.autoplay||y.inplay||W(y),F(y),M(y),void Y(y)}if(m&&m.api&&("popup"!=m.mode&&(function(e){e.mode="popup",e.box.style.position="fixed",e.box.style.zIndex=2147483647,420<document.body.clientWidth?(e.box.style.width="400px",e.box.style.height="265px"):(e.box.style.width="320px",e.box.style.height="220px");var t=e.popup.split("-"),o=t[0],i=t[1],a="";switch(o){case"top":e.box.style.top=0,e.box.style.bottom="auto";break;case"middle":e.box.style.top="50%",e.box.style.bottom="auto","center"!=i&&(a="translateY(-50%)");break;case"bottom":e.box.style.top="auto",e.box.style.bottom=0}switch(i){case"left":e.box.style.left=0,e.box.style.right="auto",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"center":e.box.style.left="50%",e.box.style.right="auto",a="middle"==o?"translate(-50%, -50%)":"translateX(-50%)",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"right":e.box.style.left="auto",e.box.style.right=0,320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;left: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;left: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;"}e.box.style.transform=a,e.close.style.display="block",L(e,{action:"mode",value:"popup"}),B(e)}(m),Pepsia.Helpers.log("Player #"+m.id,"Activation mode Popup !","info",m.debug)),y!=m&&(X(y),y=m),y.started||!y.autoplay||y.inplay||W(y)),m&&m==y&&m.api)return F(y),M(y),void Y(y);if(!m&&w&&w.isview&&w.api){if("corner"!=w.mode&&!w.inplay&&!w.started&&w.autoplay)return void W(w);"corner"!=w.mode&&(function(e){e.mode="corner",e.box.style.position="fixed",e.box.style.zIndex=2147483647,420<document.body.clientWidth?(e.box.style.width="400px",e.box.style.height="265px"):(e.box.style.width="320px",e.box.style.height="220px");var t=e.corner.split("-"),o=t[0],i=t[1],a="";switch(o){case"top":e.box.style.top=0,e.box.style.bottom="auto";break;case"middle":e.box.style.top="50%",e.box.style.bottom="auto","center"!=i&&(a="translateY(-50%)");break;case"bottom":e.box.style.top="auto",e.box.style.bottom=0}switch(i){case"left":e.box.style.left=0,e.box.style.right="auto",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"center":e.box.style.left="50%",e.box.style.right="auto",a="middle"==o?"translate(-50%, -50%)":"translateX(-50%)",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"right":e.box.style.left="auto",e.box.style.right=0,320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;left: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;left: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;"}e.box.style.transform=a,e.close.style.display="block",L(e,{action:"mode",value:"corner"}),B(e)}(w),Pepsia.Helpers.log("Player #"+w.id,"Activation mode Corner !","info",w.debug)),y!=w&&(X(y),y=w)}return w&&w==y&&w.api?(F(y),M(y),void Y(y)):void 0}}}}Pepsia.Helpers.addEventListener(window,"message",function(e){if(void 0!==e.data.provider&&"Pepsia"==e.data.provider&&void 0!==e.data.id&&void 0!==e.data.action&&void 0!==b[e.data.id]){var t=b[e.data.id];switch(e.data.action){case"apiready":t.api=!0,t.interstitial&&(L(t,{action:"interstitial_start",value:t.interstitial}),A(t)),t.autoplay,O&&clearTimeout(O),O=setTimeout(function(){U(!0),Pepsia.Helpers.log("Player #"+t.id,"SCROLLHANDLER START","info",t.debug)},500),Pepsia.Helpers.dispatchEvent(t.player,"apiready"),Pepsia.Helpers.log("Player #"+t.id,"APIREADY","info",t.debug);break;case"ready":t.state="start",Pepsia.Helpers.dispatchEvent(t.player,"ready"),Pepsia.Helpers.log("Player #"+t.id,"READY","info",t.debug);break;case"userpause":break;case"started":t.started=!0,t.inplay=!1,t==w&&"corner"!=w.mode&&U(!0);break;case"canpause":t.canpause=e.data.value,t.forced&&t.canpause&&(Pepsia.Helpers.log("Player #"+t.id,"TEST PAUSED !","info",t.debug),X(t),t.forced=!1),t==y&&t.canpause&&U(!0);break;case"userplay":t.clicsaver&&"interstitial"==t.mode&&(L(y,{action:"interstitial_start",value:!1}),D(t),t.clicsaver=!1,V(t,"SaverPlay !")),t!=y&&(h&&h!=t&&Pepsia.Helpers.log("Player #"+h.id,"Désactivation forcage User !","info",h.debug),y.canpause?X(y):(Pepsia.Helpers.log("Player #"+y.id,"Activation forcage paused !","info",y.debug),y.forced=!0),M(h=y=t),Pepsia.Helpers.log("Player #"+t.id,"Activation forcage User !","info",t.debug)),Pepsia.Helpers.log("Player #"+t.id,"User Play","info",t.debug);break;case"play":Pepsia.Helpers.log("Player #"+t.id,"Play","info",t.debug);break;case"resize":500<=t.player.offsetWidth?t.container.style.cssText="position:relative !important;padding:calc(56.25% + 60px) 0 0 0 !important;":t.container.style.cssText="position:relative !important;padding:calc(56.25% + 40px) 0 0 0 !important;",Pepsia.Helpers.dispatchEvent(t.player,"sizechange",{detail:{width:t.element.offsetWidth,height:t.element.offsetHeight}});break;case"getVideos":var o=e.data.num?e.data.num:3,a=t.cid?t.cid:"all",r=[];for(i in E[a]){if(0==o)break;r.push(E[a][i]),delete E[a][i],o--}Object.keys(E[a]).length<6&&T(),0<r.length&&L(t,{action:"setVideos",videos:r});break;case"interstitial_start":Pepsia.Helpers.dispatchEvent(t.player,"interstitial_start");break;case"interstitial_end":H=!1,Pepsia.Helpers.setCookie("PepsiaInterstitial",1,30),D(t),U(!0),Pepsia.Helpers.dispatchEvent(t.player,"interstitial_end");break;case"start":Pepsia.Helpers.log("Player #"+t.id,"START","info",t.debug);break;case"end":Pepsia.Helpers.log("Player #"+t.id,"END","info",t.debug),t.cpt++,0<t.maxplay&&t.cpt==t.maxplay&&(V(t,"MaxPlay"),C(t));break;case"logo":var n=e.data.value;n!=t.logo&&(t.logo=n,Pepsia.Helpers.dispatchEvent(t.player,"logochange",{detail:n}));break;case"mute":var p=e.data.value;P[t.id]||t.mute==p||(t.mute=p,Pepsia.Helpers.dispatchEvent(t.player,"mutechange",{detail:p}));break;case"controls":var l=e.data.value;v[t.id]||l==t.controls||(t.controls=l,Pepsia.Helpers.dispatchEvent(t.player,"controlschange",{detail:l}));break;case"autoplay":var s=e.data.value;t.autoplay!=s&&(t.autoplay=s,Pepsia.Helpers.dispatchEvent(t.player,"autoplaychange",{detail:s}));break;case"fullscreen":var d=e.data.value;d!=t.fullscreen&&(t.fullscreen=d,Pepsia.Helpers.dispatchEvent(t.player,"fullscreenchange",{detail:d}));break;case"volume":var c=e.data.value;c!=t.volume&&(t.volume=c,Pepsia.Helpers.dispatchEvent(t.player,"volumechange",{detail:c}));break;case"duration":var m=isNaN(parseFloat(e.data.value))?0:parseFloat(e.data.value);m!=t.duration&&(t.duration=m,Pepsia.Helpers.dispatchEvent(t.player,"durationchange",{detail:m}));break;case"time":var u=isNaN(parseFloat(e.data.value))?0:parseFloat(e.data.value);t.time!=u&&(t.time=u,Pepsia.Helpers.dispatchEvent(t.player,"timechange",{detail:m})),!t.skip||"popup"!=t.mode&&"corner"!=t.mode||(f=t).started&&f.canpause&&!f.fullscreen&&!x[f.id]&&.5<f.time/f.duration&&f.time/f.duration<.9&&(_(f,f.duration-1),Pepsia.Helpers.log("Player #"+f.id,"Skip to "+(f.duration-1)+"s","info",f.debug)),"normal"==t.mode&&I(t)&&!R(t)&&t.duration-t.time<=2&&(g=t)&&!x[g.id]&&g.started&&(j(x[g.id]=g),Pepsia.Helpers.log("Player #"+g.id,"Waited","info",g.debug));break;case"error":message=e.data.message,Pepsia.Helpers.dispatchEvent(t.player,"error",{detail:message}),Pepsia.Helpers.log("Player #"+t.id,message,"error",t.debug),C(t)}e.stopPropagation()}var g,f}),Pepsia.Helpers.addEventListener(window,"scroll",U),"function"!=typeof window.Pepsia.PlayerAsync&&(window.Pepsia.PlayerAsync=function(){!function(e){if(null===(e=void 0!==e?e:null)){if(arr=document.getElementsByClassName("pepsia_player"),0<arr.length){for(var t=arr.length-1;0<=t;t--)o(arr[t]);T()}}else{if(!e)return;o(e)&&T()}}()}),Object.defineProperty(window.Pepsia,"Player",{value:function(e){return t(o(e)),e},enumerable:!0,writable:!1}),window.Pepsia.PlayerAsync()}()}}();
